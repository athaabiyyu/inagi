const subscriptionForm=(()=>{const o=document.querySelectorAll(".subscription-form");if(null===o)return;for(let s=0;s<o.length;s++){let e=o[s].querySelector('button[type="submit"]'),t=e.innerHTML,i=o[s].querySelector(".form-control"),r=o[s].querySelector(".subscription-form-antispam"),n=o[s].querySelector(".subscription-status");o[s].addEventListener("submit",function(s){s&&s.preventDefault(),""===r.value&&c(this,e,i,t,n)})}let c=(s,e,t,i,r)=>{e.innerHTML="Sending...";var n=s.action.replace("/post?","/post-json?"),s="&"+t.name+"="+encodeURIComponent(t.value);let o=document.createElement("script");o.src=n+"&c=callback"+s,document.body.appendChild(o);let c="callback";window[c]=s=>{delete window[c],document.body.removeChild(o),e.innerHTML=i,"success"==s.result?(t.classList.remove("is-invalid"),t.classList.add("is-valid"),r.classList.remove("status-error"),r.classList.add("status-success"),r.innerHTML=s.msg,setTimeout(()=>{t.classList.remove("is-valid"),r.innerHTML="",r.classList.remove("status-success")},6e3)):(t.classList.remove("is-valid"),t.classList.add("is-invalid"),r.classList.remove("status-success"),r.classList.add("status-error"),r.innerHTML=s.msg.substring(4),setTimeout(()=>{t.classList.remove("is-invalid"),r.innerHTML="",r.classList.remove("status-error")},6e3))}}})();export default subscriptionForm;
